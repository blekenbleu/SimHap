// Decompiled with JetBrains decompiler
// Type: sierses.SimHap.SettingsControl
// Assembly: SimHaptics, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: E01F66FE-3F59-44B4-8EBC-5ABAA8CD8267
// Assembly location: C:\Users\demas\Downloads\dnSpy-net-win64\SimHaptics.dll

using SimHub.Plugins.Styles;
using System;
using System.CodeDom.Compiler;
using System.ComponentModel;
using System.Diagnostics;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Controls.Primitives;
using System.Windows.Markup;

namespace sierses.SimHap
{
	public partial class SettingsControl : UserControl //, IComponentConnector
	{
		public SimHapticsPlugin Plugin { get; }
		// this.InitializeComponent() gets generated by vs from SettingsControl.xaml
		public SettingsControl() => this.InitializeComponent();

		public SettingsControl(SimHapticsPlugin plugin) : this()
		{
			this.Plugin = plugin;
			this.DataContext = (object) this.Plugin;
			this.Version.Text = SimHapticsPlugin.PluginVersion;
		}

		private void Refresh_Click(object sender, RoutedEventArgs e)
		{
			this.Plugin.S.Id = "";
			SimHapticsPlugin.LoadFailCount = 0;
			SimHapticsPlugin.FetchStatus = APIStatus.Retry;
			SimHapticsPlugin.LoadStatus = DataStatus.None;
			SimHapticsPlugin.LoadFinish = !SimHapticsPlugin.LoadFinish;
		}

		private void Lock_Click(object sender, RoutedEventArgs e)
		{
			this.Plugin.Settings.Unlocked = !this.Plugin.Settings.Unlocked;
			this.Plugin.D.LockedText = this.Plugin.Settings.Unlocked ? "Lock" : "Unlock";
		}
	}
}
