// Decompiled with JetBrains decompiler
// Type: sierses.Haptics.SettingsControl
// MVID: E01F66FE-3F59-44B4-8EBC-5ABAA8CD8267

using SimHub;
using System;
using System.Collections.ObjectModel;
using System.Diagnostics;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Controls.Primitives;
using System.Windows.Input;

namespace sierses.Sim
{
	public partial class SettingsControl : UserControl //, IComponentConnector
	{
		public Haptics Plugin { get; }
		// this.InitializeComponent() gets generated by vs from SettingsControl.xaml
		public SettingsControl() => InitializeComponent();

		public SettingsControl(Haptics plugin) : this()
		{
			Plugin = plugin;
			DataContext = Plugin;
			Version.Text = Plugin.PluginVersion;
		}

		// called when expanding EQ or Plugin.E.NextUp() 
		internal void Init(ushort[] S)
		{
			EQ0_value.Text = S[0].ToString();
			EQ1_value.Text = S[1].ToString();
			EQ2_value.Text = S[2].ToString();
			EQ3_value.Text = S[3].ToString();
			EQ4_value.Text = S[4].ToString();
			EQ5_value.Text = S[5].ToString();
			EQ6_value.Text = S[6].ToString();
			EQ7_value.Text = S[7].ToString();
			EQ8_value.Text = S[8].ToString();
		}

		private void EQ_Expanded(object sender, RoutedEventArgs e)
		{
			Init(Plugin.E.Q[Plugin.E.EQswitch].Slider);
		}

		private void TC_Expanded(object sender, RoutedEventArgs e)
		{
			Init(Plugin.E.Q[Plugin.E.EQswitch].Slider);
		}

		// this may provoke new equalizer creation
		private void EQswitch_increment_Click(object sender, RoutedEventArgs e)
		{
			EQswitch_value.Text = Plugin.E.NextUp(true);
		}

		private void EQswitch_decrement_Click(object sender, RoutedEventArgs e)
		{
			EQswitch_value.Text = Plugin.E.NextUp(false);
		}

		private void Refresh_Click(object sender, RoutedEventArgs e)
		{
			Plugin.S.Id = "";			// Refresh_Click() force a mismatch
			Logging.Current.Info($"Haptics.Refresh_Click()");
			Haptics.LoadFailCount = 1;
		}

		private void Lock_Click(object sender, RoutedEventArgs e)
		{
			Plugin.D.Unlocked = !Plugin.D.Unlocked;
			Plugin.D.LockedText = Plugin.D.Unlocked ? "Lock" : "Unlock";
		}

		private void SuspensionMultAll_ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
		{

		}

		private void SuspensionGammaAll_ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
		{

		}

		private void SuspensionGamma_ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
		{

		}

		private void EngineMulti_ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
		{

		}

		private void ButtonResetSuspension_Click(object sender, RoutedEventArgs e)
		{
			SuspensionMultAll.Value = 1.5;
			SuspensionMult.Value = 1;
			SuspensionGammaAll.Value = 1.7;
			SuspensionGamma.Value = 1;
		}

		// these should provoke equalizer property recalculations
		private void EQ0_increment_Click(object sender, RoutedEventArgs e)
		{
			EQ0_value.Text = $"{Plugin.E.Pincr(0, true)}";
		}

		private void EQ0_decrement_Click(object sender, RoutedEventArgs e)
		{
			EQ0_value.Text = $"{Plugin.E.Pincr(0, false)}";
		}

		private void EQ1_increment_Click(object sender, RoutedEventArgs e)
		{
			Plugin.E.Incr(1, true);
		}

		private void EQ1_decrement_Click(object sender, RoutedEventArgs e)
		{
			Plugin.E.Incr(1, false);
		}

		private void EQ2_increment_Click(object sender, RoutedEventArgs e)
		{
			Plugin.E.Incr(2, true);
		}

		private void EQ2_decrement_Click(object sender, RoutedEventArgs e)
		{
			Plugin.E.Incr(2, false);
		}

		private void EQ3_increment_Click(object sender, RoutedEventArgs e)
		{
			Plugin.E.Incr(3, true);
		}

		private void EQ3_decrement_Click(object sender, RoutedEventArgs e)
		{
			Plugin.E.Incr(3, false);
		}

		private void EQ4_increment_Click(object sender, RoutedEventArgs e)
		{
			Plugin.E.Incr(4, true);
		}

		private void EQ4_decrement_Click(object sender, RoutedEventArgs e)
		{
			Plugin.E.Incr(4, false);
		}

		private void EQ5_increment_Click(object sender, RoutedEventArgs e)
		{
			Plugin.E.Incr(5, true);
		}

		private void EQ5_decrement_Click(object sender, RoutedEventArgs e)
		{
			Plugin.E.Incr(5, false);
		}

		private void EQ6_increment_Click(object sender, RoutedEventArgs e)
		{
			Plugin.E.Incr(6, true);
		}

		private void EQ6_decrement_Click(object sender, RoutedEventArgs e)
		{
			Plugin.E.Incr(6, false);
		}

		private void EQ7_increment_Click(object sender, RoutedEventArgs e)
		{
			Plugin.E.Incr(7, true);
		}

		private void EQ7_decrement_Click(object sender, RoutedEventArgs e)
		{
			Plugin.E.Incr(7, false);
		}

		private void EQ8_increment_Click(object sender, RoutedEventArgs e)
		{
			EQ8_value.Text = $"{Plugin.E.Pincr(8, true)}";
		}

		private void EQ8_decrement_Click(object sender, RoutedEventArgs e)
		{
			EQ8_value.Text = $"{Plugin.E.Pincr(8, false)}";
		}

        private void ToneCal_Expanded(object sender, RoutedEventArgs e)
        {

        }
    }
}
